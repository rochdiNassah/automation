#!/usr/bin/env php
<?php declare(strict_types=1);

require './vendor/autoload.php';

use Automation\Framework\Application;
use Automation\Framework\Facades\Slack;

Application::instance()->run();

$sleep_for = (int) config('DAEMON_SLEEP_FOR') ?? 1200;

if (!Slack::channel('debug')->send('Automation daemon has started!')) {
    throw new Exception('Unable to notify that the daemon has started!');
}

while (true) {
    sleep($sleep_for);
}